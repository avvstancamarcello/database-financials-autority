<!DOCTYPE html>
<html lang="it" prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Flag Icons CSS Library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css">
    
    <!-- Meta Tags SEO Base -->
    <meta name="description" content="üåä Database 108 autorit√† finanziarie europee. Segnala truffe Forex, Crypto, Pig Butchering. Mappa interattiva geolocalizzata. Recupera i tuoi capitali come Ulisse torn√≤ a Itaca.">
    <meta name="keywords" content="tutela truffe, truffe finanziarie, pig butchering, recupero capitali truffa, broker non autorizzato, truffa forex, truffa criptovalute, ABF banca, autorit√† finanziarie europa, consob, FCA, mappa truffe europa, MT4 truffa, chargeback PSD2, odissea digitale">
    <meta name="author" content="Avvocato Marcello Stanca">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://tutelatruffe.it/">
    
    <!-- Alternate Languages -->
    <link rel="alternate" hreflang="it" href="https://tutelatruffe.it/?lang=it">
    <link rel="alternate" hreflang="en" href="https://tutelatruffe.it/?lang=en">
    <link rel="alternate" hreflang="fr" href="https://tutelatruffe.it/?lang=fr">
    <link rel="alternate" hreflang="de" href="https://tutelatruffe.it/?lang=de">
    <link rel="alternate" hreflang="es" href="https://tutelatruffe.it/?lang=es">
    <link rel="alternate" hreflang="x-default" href="https://tutelatruffe.it/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tutelatruffe.it/">
    <meta property="og:title" content="Tutela Truffe | Database Autorit√† Finanziarie UE - Odissea Digitale">
    <meta property="og:description" content="üåä Database 108 autorit√† finanziarie europee. Segnala truffe Forex, Crypto, Pig Butchering. Mappa interattiva geolocalizzata. Recupera i tuoi capitali come Ulisse torn√≤ a Itaca.">
    <meta property="og:image" content="https://tutelatruffe.it/icon-512.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:image:alt" content="Tutela Truffe - Database Autorit√† Finanziarie e Mappa Europea Truffe">
    <meta property="og:site_name" content="Tutela Truffe">
    <meta property="og:locale" content="it_IT">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:locale:alternate" content="fr_FR">
    <meta property="og:locale:alternate" content="de_DE">
    <meta property="og:locale:alternate" content="es_ES">
    <meta property="article:author" content="Avvocato Marcello Stanca">
    <meta property="article:publisher" content="https://www.linkedin.com/in/marcello-stanca/">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://tutelatruffe.it/">
    <meta name="twitter:title" content="üåä Odissea Digitale | Recupera i Tuoi Capitali dalle Truffe">
    <meta name="twitter:description" content="Database 108 Autorit√† UE + Mappa Truffe Geolocalizzata. Segnala Forex/Crypto/Pig Butchering. Come Ulisse torn√≤ a Itaca, riconquista il tuo Vello d'Oro.">
    <meta name="twitter:image" content="https://tutelatruffe.it/icon-512.png">
    <meta name="twitter:image:alt" content="Tutela Truffe - Mappa Europea Truffe Finanziarie">
    <meta name="twitter:creator" content="@marcellostanca">
    <meta name="twitter:site" content="@tutelatruffe">
    
    <!-- Copyright & Ownership -->
    <meta name="copyright" content="¬© 2026 Avvocato Marcello Stanca - Tutti i diritti riservati">
    <meta name="DC.rights" content="¬© 2026 Avvocato Marcello Stanca">
    <meta name="DC.creator" content="Avvocato Marcello Stanca">
    
    <meta name="theme-color" content="#667eea">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FinAuthority">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <title>Database Autorit√† Finanziarie Internazionali - Protezione Consumatori</title>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Financial Authority Database",
        "alternateName": "Database Autorit√† Finanziarie Internazionali",
        "url": "https://avvstancamarcello.github.io/Financial-Authority-Database/",
        "description": "Database ufficiale delle Autorit√† Finanziarie di 108 Paesi. Verifica licenze bancarie, segnala frodi, proteggi i tuoi investimenti.",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web, iOS, Android",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "author": {
            "@type": "Person",
            "name": "Avvocato Marcello Stanca",
            "email": "lawyer@marcellostanca.it",
            "jobTitle": "Avvocato",
            "address": {
                "@type": "PostalAddress",
                "addressLocality": "Firenze",
                "addressCountry": "IT"
            }
        },
        "creator": {
            "@type": "Person",
            "name": "Avvocato Marcello Stanca"
        },
        "copyrightHolder": {
            "@type": "Person",
            "name": "Avvocato Marcello Stanca"
        },
        "copyrightYear": "2026",
        "inLanguage": ["it", "en", "fr", "de", "es"],
        "keywords": "autorit√† finanziarie, banche centrali, protezione consumatori, frodi bancarie, verifica licenze, CONSOB, SEC, FCA, BaFin",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "108"
        }
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Dataset",
        "name": "International Financial Authorities Database",
        "description": "Database completo di 108 autorit√† finanziarie nazionali con informazioni di contatto, link ufficiali e procedure di segnalazione frodi",
        "url": "https://avvstancamarcello.github.io/Financial-Authority-Database/",
        "keywords": ["financial authorities", "central banks", "consumer protection", "fraud reporting"],
        "license": "https://avvstancamarcello.github.io/Financial-Authority-Database/privacy.html",
        "creator": {
            "@type": "Person",
            "name": "Avvocato Marcello Stanca",
            "email": "lawyer@marcellostanca.it"
        },
        "distribution": {
            "@type": "DataDownload",
            "encodingFormat": "application/json",
            "contentUrl": "https://avvstancamarcello.github.io/Financial-Authority-Database/financial_authorities_database.json"
        },
        "spatialCoverage": {
            "@type": "Place",
            "name": "Worldwide"
        },
        "temporalCoverage": "2026"
    }
    </script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: #333; line-height: 1.6; min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); overflow: hidden; }
        .security-banner { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 20px 30px; text-align: center; border-bottom: 3px solid #047857; display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .security-banner .icon { font-size: 2em; }
        .security-banner .content { flex: 1; min-width: 300px; }
        .security-banner h2 { margin: 0 0 8px 0; font-size: 1.6em; font-weight: 700; }
        .security-banner p { margin: 0; font-size: 1.05em; opacity: 0.95; line-height: 1.5; }
        .security-banner strong { font-weight: 700; text-decoration: underline; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; position: relative; }
        .language-selector { justify-content: center; margin-top: 15px; display: flex; gap: 10px; background: rgba(255,255,255,0.2); padding: 8px 12px; border-radius: 25px; backdrop-filter: blur(10px); }
        .lang-btn { background: rgba(255,255,255,0.3); border: 2px solid transparent; color: white; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-weight: 600; font-size: 14px; transition: all 0.3s ease; }
        .lang-btn:hover { background: rgba(255,255,255,0.5); transform: translateY(-2px); }
        .lang-btn.active { background: white; color: #667eea; border-color: white; }
        h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .subtitle { font-size: 1.2em; opacity: 0.95; }
        
        /* Referenze Badge */
        .referenze-badge {
            background: rgba(212, 175, 55, 0.2);
            border: 2px solid var(--ref-gold, #d4af37);
            padding: 1rem 2rem;
            border-radius: 12px;
            margin: 1.5rem auto;
            max-width: 800px;
            text-align: center;
        }
        .referenze-badge h3 {
            color: #d4af37;
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }
        .referenze-badge p {
            margin: 0.3rem 0;
            font-size: 0.95rem;
        }
        .referenze-badge a {
            color: white;
            text-decoration: underline;
            font-weight: bold;
        }
        .referenze-badge a:hover {
            color: #d4af37;
        }
        
        .intro-text { padding: 20px 30px; background-color: #f0f4ff; text-align: center; font-size: 1.1em; color: #1e3c72; border-bottom: 1px solid #ddd; }
        .eu-references { background: #f0f4ff; padding: 20px; margin: 20px 0; border-left: 5px solid #667eea; border-radius: 8px; }
        .eu-references h3 { color: #1e3c72; margin-bottom: 15px; }
        .eu-references p { margin-bottom: 10px; }
        .eu-references a { color: #667eea; text-decoration: none; font-weight: 600; margin: 0 5px; }
        .eu-references a:hover { text-decoration: underline; }
        .controls { padding: 30px; background: #f8f9fa; display: flex; gap: 20px; flex-wrap: wrap; align-items: center; justify-content: space-between; border-bottom: 1px solid #ddd;}
        .search-box { flex: 1; min-width: 250px; }
        .search-box input { width: 100%; padding: 12px 20px; border: 2px solid #ddd; border-radius: 25px; font-size: 16px; transition: all 0.3s ease; }
        .search-box input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 10px rgba(102, 126, 234, 0.3); }
        .filter-buttons { display: flex; gap: 10px; flex-wrap: wrap; }
        .filter-btn { padding: 10px 20px; border: 2px solid #667eea; background: white; color: #667eea; border-radius: 20px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .filter-btn:hover, .filter-btn.active { background: #667eea; color: white; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3); }
        .stats { padding: 30px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .stat-card { background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; text-align: center; backdrop-filter: blur(10px); }
        .stat-number { font-size: 2.5em; font-weight: bold; margin-bottom: 5px; }
        .stat-label { font-size: 1em; opacity: 0.9; }
        .content { padding: 30px; }
        .countries-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px; margin-top: 20px; }
        .country-card { background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 25px; transition: all 0.3s ease; cursor: pointer; }
        .country-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); border-color: #667eea; }
        .country-header { display: flex; align-items: center; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0; }
        .country-flag { 
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .country-flag .fi {
            width: 48px !important;
            height: 36px !important;
            font-size: 48px;
        }
        .country-name { font-size: 1.5em; font-weight: bold; color: #667eea; }
        .info-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0; flex-direction: column; }
        .info-label { font-weight: 600; color: #666; margin-bottom: 5px; }
        .info-value { color: #333; font-weight: 500; font-size: 0.95em; word-break: break-word; }
        .authority-link { margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px; }
        .authority-link a { color: #667eea; text-decoration: none; font-weight: 600; word-break: break-all; transition: color 0.3s ease; font-size: 0.9em; }
        .authority-link a:hover { color: #764ba2; text-decoration: underline; }
        .protection-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 0.85em; font-weight: 600; }
        .protection-altissimo { background: #d4edda; color: #155724; }
        .protection-alto { background: #d1ecf1; color: #0c5460; }
        .protection-medio { background: #fff3cd; color: #856404; }
        .flags-grid-container { padding: 30px; background-color: #f8f9fa; }
        .flags-grid-container h2 { text-align: center; color: #1e3c72; margin-bottom: 20px; font-size: 1.8em; }
        .flags-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; max-width: 1200px; margin: 0 auto; }
        .flag-item { background: white; border: 2px solid #e0e0e0; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 110px; }
        .flag-item:hover { transform: translateY(-5px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); border-color: #667eea; }
        .flag-icon-wrapper { 
            margin-bottom: 8px;
            display: block;
        }
        .flag-icon-wrapper .fi { 
            width: 48px !important;
            height: 36px !important;
            font-size: 48px;
            display: inline-block;
        }
        .flag-code { font-weight: 600; color: #667eea; font-size: 0.9em; margin-top: 5px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto; }
        .modal-content { background: white; max-width: 900px; margin: 50px auto; border-radius: 15px; padding: 40px; position: relative; }
        .close-modal { position: absolute; top: 20px; right: 20px; font-size: 30px; cursor: pointer; color: #666; transition: color 0.3s ease; }
        .close-modal:hover { color: #f5576c; }
        footer { background: #2c3e50; color: white; text-align: center; padding: 20px; }
        @media (max-width: 768px) { 
            h1 { font-size: 1.8em; } 
            .language-selector { position: static; justify-content: center; margin-bottom: 15px; } 
            .countries-grid { grid-template-columns: 1fr; } 
            .stats { grid-template-columns: 1fr; } 
            .controls { flex-direction: column; } 
            .search-box { width: 100%; }
            .modal-content { 
                max-width: 95%; 
                width: 95%; 
                margin: 20px auto; 
                padding: 25px 20px; 
                font-size: 0.95em;
            }
            .close-modal { font-size: 25px; top: 15px; right: 15px; }
            .authority-link a { font-size: 0.85em; word-break: break-all; }
        }
    </style>
</head>
<body itemscope itemtype="https://schema.org/WebApplication">
    <div class="container">
        <aside class="security-banner" role="banner" aria-label="Security Notice">
            <span class="icon" aria-hidden="true">üõ°Ô∏è</span>
            <div class="content">
                <h2 data-i18n="securityTitle">‚úÖ SITO UFFICIALE LEGITTIMO - DATABASE DI PROTEZIONE DEI CONSUMATORI</h2>
                <p data-i18n="securityText">Questa pagina offre un database educativo ufficiale creato da <strong>Avvocato Marcello Stanca a Firenze - Italy</strong>. Offre ai consumatori, clienti di Banche, tutti i link per accedere alle pagine ufficiali delle Autorit√† di Vigilanza Finanziaria di 108 Paesi del mondo. L'accesso alle Authority permette di verificare: <strong>1.</strong> l'identit√† delle Authority Finanziarie, indicate agli utenti in pagine web di false imprese, <strong>2.</strong> ma anche l'effettivo possesso ed il nr di licenza concessa, valida per offrire servizi finanziari nel Paese di residenza del consumatore/cliente bancario. Questa pagina offre strumenti di contatto e di consultazione per proteggere utenti consumatori contro le frodi finanziarie.</p>
            </div>
            <span class="icon" aria-hidden="true">‚úÖ</span>
        </aside>
        <header role="banner">
            <nav class="language-selector" role="navigation" aria-label="Language selection">
                <button class="lang-btn active" onclick="changeLanguage('it')" aria-label="Italiano">üáÆüáπ IT</button>
                <button class="lang-btn" onclick="changeLanguage('en')" aria-label="English">üá¨üáß EN</button>
                <button class="lang-btn" onclick="changeLanguage('fr')" aria-label="Fran√ßais">üá´üá∑ FR</button>
                <button class="lang-btn" onclick="changeLanguage('de')" aria-label="Deutsch">üá©üá™ DE</button>
                <button class="lang-btn" onclick="changeLanguage('es')" aria-label="Espa√±ol">üá™üá∏ ES</button>
            </nav>
            <h1 data-i18n="title" itemprop="name">Database Bancario Internazionale</h1>
            <p class="subtitle" data-i18n="subtitle" itemprop="description">Financial Market Authorities in 108 Countries</p>
            <p class="intro-text" data-i18n="introText">Questo sito web offre i link per accedere alle webpage delle Autorit√† Finanziarie di 108 Paesi del Mondo. Usalo per verificare la legittimit√† e regolarit√† di imprese, di persone ed entit√† che offrono servizi finanziari.</p>
        </header>

        <!-- Institutional References Banner -->
        <div style="background: linear-gradient(135deg, #003399 0%, #1a365d 100%); color: white; padding: 25px; margin: 0; text-align: center; border-bottom: 4px solid #FFCC00;">
            <div style="max-width: 1200px; margin: 0 auto;">
                <div style="display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap;">
                    <div style="font-size: 3em;">üèõÔ∏è</div>
                    <div style="flex: 1; min-width: 300px; text-align: left;">
                        <h2 style="margin: 0 0 8px 0; font-size: 1.6em; font-weight: 700;">Credenziali Verificate Parlamento Europeo</h2>
                        <p style="margin: 0; font-size: 1.05em; opacity: 0.95; line-height: 1.5;">
                            <strong style="text-decoration: underline;">2 Petizioni Ufficialmente Accettate (2024-2025)</strong> su responsabilit√† bancaria PSD2. 
                            Intervento Camera dei Deputati. Bestseller Amazon "Rischio Trading". 
                            <a href="referenze.html" style="color: #FFCC00; font-weight: bold; text-decoration: underline;">üìú Vedi Referenze ‚Üí</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <section class="controls" role="search" aria-label="Search and filter">
            <div class="search-box">
                <input type="text" id="searchInput" data-i18n-placeholder="searchPlaceholder" placeholder="Cerca per paese o autorit√†..." aria-label="Search countries">
            </div>
            <div class="filter-buttons" role="group" aria-label="Filter options">
                <button class="filter-btn active" onclick="filterCountries('all')" data-i18n="filterAll" aria-pressed="true">Tutti i Paesi</button>
                <button class="filter-btn" onclick="filterCountries('altissimo')" data-i18n="filterHigh" aria-pressed="false">Protezione Altissima</button>
                <button class="filter-btn" onclick="filterCountries('ue')" data-i18n="filterEU" aria-pressed="false">Paesi UE</button>
                <button class="filter-btn" onclick="filterCountries('non-ue')" data-i18n="filterNonEU" aria-pressed="false">Paesi non-UE</button>
            </div>
        </section>

        <div class="content">
            <div class="eu-references">
                <h3 data-i18n="euReferences">Risorse Istituzionali di Supervisione - Unione Europea USA FBI - ScamShield</h3>
                <p><strong>ESMA</strong> - European Securities and Markets Authority: <a href="https://www.esma.europa.eu" target="_blank">esma.europa.eu</a></p>
                <p><strong data-i18n="euCommission">Commissione Europea</strong>: <a href="https://commission.europa.eu" target="_blank">commission.europa.eu</a></p>
                <p><strong>FBI IC3</strong> - Internet Crime Complaint Center: <a href="https://www.ic3.gov/AnnualReport/Reports" target="_blank">ic3.gov/AnnualReport/Reports</a></p>
                <p><strong>IOSCO i-SCAN</strong> - International Organization of Securities Commissions: <a href="https://www.iosco.org/i-scan/" target="_blank">iosco.org/i-scan/</a></p>
                <p><strong>ScamShield</strong> - Singapore Police Force: <a href="https://www.scamshield.gov.sg/" target="_blank">scamshield.gov.sg</a></p>
            </div>
        </div>

        <div class="flags-grid-container">
            <h2 data-i18n="flagsTitle">Accesso Rapido per Paese</h2>
            <div class="flags-grid" id="flagsGrid"></div>
        </div>

        <div class="stats">
            <div class="stat-card"><div class="stat-number" id="totalCountries">0</div><div class="stat-label" data-i18n="statCountries">Paesi Monitorati</div></div>
            <div class="stat-card"><div class="stat-number" id="euCountries">0</div><div class="stat-label" data-i18n="statEU">Paesi UE</div></div>
            <div class="stat-card"><div class="stat-number" id="highProtection">0</div><div class="stat-label" data-i18n="statHighProtection">Protezione Altissima</div></div>
        </div>

        <div class="content">
            <div class="countries-grid" id="countriesGrid"></div>
        </div>

        <footer>
            <p data-i18n="footer">¬© 2026 Author is Marcello Stanca Lawyer in Italy Florence. Database Internazionale - Banche, Truffe Finanziarie e Responsabilit√†. Tutti i diritti riservati.</p>
            <p data-i18n="footerNote">Questo database √® a scopo informativo. Consultare sempre le autorit√† competenti. Segnala errori della web page al webmaster: <a href="mailto:lawyer@marcellostanca.it" style="color: white;">lawyer@marcellostanca.it</a></p>
            <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.3);">
                <strong data-i18n="privacyStatement">üîí PRIVACY: Questa app NON raccoglie dati personali degli utenti</strong> | 
                <a href="privacy.html" style="color: #fff; text-decoration: underline;" data-i18n="privacyLink">Privacy Policy</a>
            </p>
        </footer>
    </div>

    <div id="countryModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">√ó</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        const translations = {
            it: {
                title: "Database Bancario Internazionale",
                subtitle: "Financial Market Authorities in 108 Countries",
                securityTitle: "‚úÖ SITO UFFICIALE LEGITTIMO - DATABASE DI PROTEZIONE DEI CONSUMATORI",
                securityText: "Questa pagina offre un database educativo ufficiale creato da <strong>Avvocato Marcello Stanca a Firenze - Italy</strong>. Offre ai consumatori, clienti di Banche, tutti i link per accedere alle pagine ufficiali delle Autorit√† di Vigilanza Finanziaria di 108 Paesi del mondo. L'accesso alle Authority permette di verificare: <strong>1.</strong> l'identit√† delle Authority Finanziarie, indicate agli utenti in pagine web di false imprese, <strong>2.</strong> ma anche l'effettivo possesso ed il nr di licenza concessa, valida per offrire servizi finanziari nel Paese di residenza del consumatore/cliente bancario. Questa pagina offre strumenti di contatto e di consultazione per proteggere utenti consumatori contro le frodi finanziarie.",
                introText: "Questo sito web offre i link per accedere alle webpage delle Autorit√† Finanziarie di 108 Paesi del Mondo. Usalo per verificare la legittimit√† e regolarit√† di imprese, di persone ed entit√† che offrono servizi finanziari.",
                searchPlaceholder: "Cerca per paese o autorit√†...",
                filterAll: "Tutti i Paesi",
                filterHigh: "Protezione Altissima",
                filterEU: "Paesi UE",
                filterNonEU: "Paesi non-UE",
                statCountries: "Paesi Monitorati",
                statEU: "Paesi UE",
                statHighProtection: "Protezione Altissima",
                footer: "¬© 2026 Author is Marcello Stanca Lawyer in Italy Florence. Database Internazionale - Banche, Truffe Finanziarie e Responsabilit√†. Tutti i diritti riservati.",
                footerNote: "Questo database √® a scopo informativo. Consultare sempre le autorit√† competenti. Segnala errori della web page al webmaster: lawyer@marcellostanca.it",
                authority: "Autorit√† Competente",
                protectionLevel: "Livello Protezione",
                notes: "Note",
                euReferences: "Risorse Istituzionali di Supervisione - Unione Europea USA FBI - ScamShield",
                euCommission: "Commissione Europea",
                flagsTitle: "Accesso Rapido per Paese",
                modalAuthority: "Autorit√† Finanziaria",
                modalAbbreviation: "Abbreviazione",
                modalHomepage: "Homepage",
                modalFraudReport: "Segnalazione Frodi",
                modalEmail: "Email",
                modalSocial: "Social Media",
                modalNotes: "Note",
                privacyStatement: "üîí PRIVACY: Questa app NON raccoglie dati personali degli utenti",
                privacyLink: "Privacy Policy"
            },
            en: {
                title: "International Banking Database",
                subtitle: "Financial Market Authorities in 108 Countries",
                securityTitle: "‚úÖ OFFICIAL LEGITIMATE WEBSITE - CONSUMER PROTECTION DATABASE",
                securityText: "This page offers an official educational database created by <strong>Lawyer Marcello Stanca in Florence - Italy</strong>. It provides consumers and bank clients with all the links to access the official pages of Financial Supervisory Authorities in 108 countries worldwide. Access to the Authorities allows verification of: <strong>1.</strong> the identity of Financial Authorities indicated to users on web pages of fake companies, <strong>2.</strong> but also the actual possession and license number granted, valid to offer financial services in the country of residence of the consumer/bank client. This page offers contact and consultation tools to protect consumer users against financial fraud.",
                introText: "This website provides links to the webpages of the Financial Authorities of 108 countries worldwide. Use it to verify the legitimacy and regularity of companies, individuals, and entities offering financial services.",
                searchPlaceholder: "Search by country or authority...",
                filterAll: "All Countries",
                filterHigh: "Highest Protection",
                filterEU: "EU Countries",
                filterNonEU: "Non-EU Countries",
                statCountries: "Monitored Countries",
                statEU: "EU Countries",
                statHighProtection: "Highest Protection",
                footer: "¬© 2026 Author is Marcello Stanca Lawyer in Italy Florence. International Database - Banks, Financial Fraud and Accountability. All rights reserved.",
                footerNote: "This database is for informational purposes. Always consult the competent authorities. Report website errors to the webmaster: lawyer@marcellostanca.it",
                authority: "Competent Authority",
                protectionLevel: "Protection Level",
                notes: "Notes",
                euReferences: "Institutional Supervision Resources - European Union USA FBI - ScamShield",
                euCommission: "European Commission",
                flagsTitle: "Quick Access by Country",
                modalAuthority: "Financial Authority",
                modalAbbreviation: "Abbreviation",
                modalHomepage: "Homepage",
                modalFraudReport: "Fraud Report",
                modalEmail: "Email",
                modalSocial: "Social Media",
                modalNotes: "Notes",
                privacyStatement: "üîí PRIVACY: This app does NOT collect user personal data",
                privacyLink: "Privacy Policy"
            },
            fr: {
                title: "Base de Donn√©es Bancaire Internationale",
                subtitle: "Autorit√©s des March√©s Financiers dans 108 Pays",
                securityTitle: "‚úÖ SITE OFFICIEL L√âGITIME - BASE DE DONN√âES DE PROTECTION DES CONSOMMATEURS",
                securityText: "Cette page offre une base de donn√©es √©ducative officielle cr√©√©e par <strong>l'Avocat Marcello Stanca √† Florence - Italie</strong>. Elle fournit aux consommateurs, clients de banques, tous les liens pour acc√©der aux pages officielles des Autorit√©s de Surveillance Financi√®re de 108 pays du monde. L'acc√®s aux Autorit√©s permet de v√©rifier: <strong>1.</strong> l'identit√© des Autorit√©s Financi√®res indiqu√©es aux utilisateurs sur des pages web de fausses entreprises, <strong>2.</strong> mais aussi la possession effective et le num√©ro de licence accord√©e, valide pour offrir des services financiers dans le pays de r√©sidence du consommateur/client bancaire. Cette page offre des outils de contact et de consultation pour prot√©ger les utilisateurs consommateurs contre les fraudes financi√®res.",
                introText: "Ce site web offre des liens pour acc√©der aux pages web des Autorit√©s Financi√®res de 108 pays du monde. Utilisez-le pour v√©rifier la l√©gitimit√© et la r√©gularit√© des entreprises, des personnes et des entit√©s offrant des services financiers.",
                searchPlaceholder: "Rechercher par pays ou autorit√©...",
                filterAll: "Tous les Pays",
                filterHigh: "Protection Maximale",
                filterEU: "Pays UE",
                filterNonEU: "Pays hors UE",
                statCountries: "Pays Surveill√©s",
                statEU: "Pays UE",
                statHighProtection: "Protection Maximale",
                footer: "¬© 2026 Auteur: Marcello Stanca Avocat en Italie Florence. Base de Donn√©es Internationale - Banques, Fraude Financi√®re et Responsabilit√©. Tous droits r√©serv√©s.",
                footerNote: "Cette base de donn√©es est √† titre informatif. Consultez toujours les autorit√©s comp√©tentes. Signaler les erreurs de la page web au webmaster: lawyer@marcellostanca.it",
                authority: "Autorit√© Comp√©tente",
                protectionLevel: "Niveau de Protection",
                notes: "Notes",
                euReferences: "Ressources de Supervision Institutionnelle - Union Europ√©enne USA FBI - ScamShield",
                euCommission: "Commission Europ√©enne",
                flagsTitle: "Acc√®s Rapide par Pays",
                modalAuthority: "Autorit√© Financi√®re",
                modalAbbreviation: "Abr√©viation",
                modalHomepage: "Page d'accueil",
                modalFraudReport: "Signalement de Fraude",
                modalEmail: "Email",
                modalSocial: "R√©seaux Sociaux",
                modalNotes: "Notes",
                privacyStatement: "üîí CONFIDENTIALIT√â: Cette app ne collecte PAS de donn√©es personnelles",
                privacyLink: "Politique de Confidentialit√©"
            },
            de: {
                title: "Internationale Banken-Datenbank",
                subtitle: "Finanzmarktaufsichtsbeh√∂rden in 108 L√§ndern",
                securityTitle: "‚úÖ OFFIZIELLE LEGITIME WEBSITE - VERBRAUCHERSCHUTZDATENBANK",
                securityText: "Diese Seite bietet eine offizielle Bildungsdatenbank, erstellt von <strong>Rechtsanwalt Marcello Stanca in Florenz - Italien</strong>. Sie bietet Verbrauchern und Bankkunden alle Links zum Zugriff auf die offiziellen Seiten der Finanzaufsichtsbeh√∂rden in 108 L√§ndern weltweit. Der Zugang zu den Beh√∂rden erm√∂glicht die √úberpr√ºfung von: <strong>1.</strong> der Identit√§t der Finanzaufsichtsbeh√∂rden, die Benutzern auf Webseiten gef√§lschter Unternehmen angegeben werden, <strong>2.</strong> aber auch des tats√§chlichen Besitzes und der Lizenznummer, g√ºltig f√ºr das Anbieten von Finanzdienstleistungen im Wohnsitzland des Verbrauchers/Bankkunden. Diese Seite bietet Kontakt- und Beratungsinstrumente zum Schutz von Verbrauchern gegen Finanzbetrug.",
                introText: "Diese Website bietet Links zu den Webseiten der Finanzbeh√∂rden von 108 L√§ndern weltweit. Nutzen Sie sie, um die Legitimit√§t und Ordnungsm√§√üigkeit von Unternehmen, Personen und Einrichtungen zu √ºberpr√ºfen, die Finanzdienstleistungen anbieten.",
                searchPlaceholder: "Nach Land oder Beh√∂rde suchen...",
                filterAll: "Alle L√§nder",
                filterHigh: "H√∂chster Schutz",
                filterEU: "EU-L√§nder",
                filterNonEU: "Nicht-EU-L√§nder",
                statCountries: "√úberwachte L√§nder",
                statEU: "EU-L√§nder",
                statHighProtection: "H√∂chster Schutz",
                footer: "¬© 2026 Autor: Marcello Stanca Rechtsanwalt in Italien Florenz. Internationale Datenbank - Banken, Finanzbetrug und Verantwortlichkeit. Alle Rechte vorbehalten.",
                footerNote: "Diese Datenbank dient nur zu Informationszwecken. Konsultieren Sie immer die zust√§ndigen Beh√∂rden. Melden Sie Fehler auf der Webseite an den Webmaster: lawyer@marcellostanca.it",
                authority: "Zust√§ndige Beh√∂rde",
                protectionLevel: "Schutzniveau",
                notes: "Hinweise",
                euReferences: "Institutionelle Aufsichtsressourcen - Europ√§ische Union USA FBI - ScamShield",
                euCommission: "Europ√§ische Kommission",
                flagsTitle: "Schnellzugriff nach Land",
                modalAuthority: "Finanzbeh√∂rde",
                modalAbbreviation: "Abk√ºrzung",
                modalHomepage: "Startseite",
                modalFraudReport: "Betrugsmeldung",
                modalEmail: "Email",
                modalSocial: "Soziale Medien",
                modalNotes: "Hinweise",
                privacyStatement: "üîí DATENSCHUTZ: Diese App sammelt KEINE pers√∂nlichen Daten",
                privacyLink: "Datenschutzerkl√§rung"
            },
            es: {
                title: "Base de Datos Bancaria Internacional",
                subtitle: "Autoridades de Mercados Financieros en 108 Pa√≠ses",
                securityTitle: "‚úÖ SITIO OFICIAL LEG√çTIMO - BASE DE DATOS DE PROTECCI√ìN AL CONSUMIDOR",
                securityText: "Esta p√°gina ofrece una base de datos educativa oficial creada por <strong>el Abogado Marcello Stanca en Florencia - Italia</strong>. Proporciona a los consumidores, clientes de bancos, todos los enlaces para acceder a las p√°ginas oficiales de las Autoridades de Supervisi√≥n Financiera de 108 pa√≠ses del mundo. El acceso a las Autoridades permite verificar: <strong>1.</strong> la identidad de las Autoridades Financieras indicadas a los usuarios en p√°ginas web de empresas falsas, <strong>2.</strong> pero tambi√©n la posesi√≥n efectiva y el n√∫mero de licencia otorgada, v√°lida para ofrecer servicios financieros en el pa√≠s de residencia del consumidor/cliente bancario. Esta p√°gina ofrece herramientas de contacto y consulta para proteger a los usuarios consumidores contra el fraude financiero.",
                introText: "Este sitio web ofrece enlaces a las p√°ginas web de las Autoridades Financieras de 108 pa√≠ses del mundo. √öselo para verificar la legitimidad y regularidad de empresas, personas y entidades que ofrecen servicios financieros.",
                searchPlaceholder: "Buscar por pa√≠s o autoridad...",
                filterAll: "Todos los Pa√≠ses",
                filterHigh: "Protecci√≥n M√°xima",
                filterEU: "Pa√≠ses UE",
                filterNonEU: "Pa√≠ses no UE",
                statCountries: "Pa√≠ses Monitoreados",
                statEU: "Pa√≠ses UE",
                statHighProtection: "Protecci√≥n M√°xima",
                footer: "¬© 2026 Autor: Marcello Stanca Abogado en Italia Florencia. Base de Datos Internacional - Bancos, Fraude Financiero y Responsabilidad. Todos los derechos reservados.",
                footerNote: "Esta base de datos es solo con fines informativos. Consulte siempre a las autoridades competentes. Reporte errores de la p√°gina web al webmaster: lawyer@marcellostanca.it",
                authority: "Autoridad Competente",
                protectionLevel: "Nivel de Protecci√≥n",
                notes: "Notas",
                euReferences: "Recursos de Supervisi√≥n Institucional - Uni√≥n Europea USA FBI - ScamShield",
                euCommission: "Comisi√≥n Europea",
                flagsTitle: "Acceso R√°pido por Pa√≠s",
                modalAuthority: "Autoridad Financiera",
                modalAbbreviation: "Abreviatura",
                modalHomepage: "P√°gina Principal",
                modalFraudReport: "Reporte de Fraude",
                modalEmail: "Email",
                modalSocial: "Redes Sociales",
                modalNotes: "Notas",
                privacyStatement: "üîí PRIVACIDAD: Esta app NO recopila datos personales",
                privacyLink: "Pol√≠tica de Privacidad"
            }
            // Add other languages if needed
        };

        let currentLanguage = 'it';
        let currentFilter = 'all';
        let countriesData = {};

        // Traduzioni specifiche per le note dei paesi
        const countryNotesTranslations = {
            'Singapore': {
                it: "Regolamentazione di altissima civilt√† con supporto psicologico per le vittime (https://www.scamshield.gov.sg/avenues-of-support/), a dimostrazione di grande attenzione per il dramma umano. La Polizia, tramite l'app Scamshield, offre una guida esemplare sulle tattiche psicologiche (https://www.scamshield.gov.sg/why-do-people-fall-prey-to-scams/) e report infografici (https://www.scamshield.gov.sg/scams-and-cybercrime-briefs/). Guida al rischio: https://www.moneysense.gov.sg/investments/investment-risk/. Cyber Security Agency (Facebook): https://www.facebook.com/CSAsingapore. DBS Bank promuove la responsabilit√† condivisa (https://www.dbs.com.sg/personal/support/general-shared-responsibility-framework.html). World Investor Week Coordinator: Paulyn Sng.",
                en: "Highly civilized regulation with psychological support for victims (https://www.scamshield.gov.sg/avenues-of-support/), demonstrating great attention to human drama. The Police, through the Scamshield app, offers exemplary guidance on psychological tactics (https://www.scamshield.gov.sg/why-do-people-fall-prey-to-scams/) and infographic reports (https://www.scamshield.gov.sg/scams-and-cybercrime-briefs/). Risk guide: https://www.moneysense.gov.sg/investments/investment-risk/. Cyber Security Agency (Facebook): https://www.facebook.com/CSAsingapore. DBS Bank promotes shared responsibility (https://www.dbs.com.sg/personal/support/general-shared-responsibility-framework.html). World Investor Week Coordinator: Paulyn Sng.",
                fr: "R√©glementation de tr√®s haute civilisation avec soutien psychologique pour les victimes (https://www.scamshield.gov.sg/avenues-of-support/), d√©montrant une grande attention au drame humain. La Police, via l'application Scamshield, offre un guide exemplaire sur les tactiques psychologiques (https://www.scamshield.gov.sg/why-do-people-fall-prey-to-scams/) et des rapports infographiques (https://www.scamshield.gov.sg/scams-and-cybercrime-briefs/). Guide des risques: https://www.moneysense.gov.sg/investments/investment-risk/. Cyber Security Agency (Facebook): https://www.facebook.com/CSAsingapore. DBS Bank promeut la responsabilit√© partag√©e (https://www.dbs.com.sg/personal/support/general-shared-responsibility-framework.html). World Investor Week Coordinator: Paulyn Sng.",
                de: "Hochzivilisierte Regulierung mit psychologischer Unterst√ºtzung f√ºr Opfer (https://www.scamshield.gov.sg/avenues-of-support/), was gro√üe Aufmerksamkeit f√ºr das menschliche Drama zeigt. Die Polizei bietet √ºber die Scamshield-App vorbildliche Anleitungen zu psychologischen Taktiken (https://www.scamshield.gov.sg/why-do-people-fall-prey-to-scams/) und Infografik-Berichte (https://www.scamshield.gov.sg/scams-and-cybercrime-briefs/). Risikoleitfaden: https://www.moneysense.gov.sg/investments/investment-risk/. Cyber Security Agency (Facebook): https://www.facebook.com/CSAsingapore. DBS Bank f√∂rdert geteilte Verantwortung (https://www.dbs.com.sg/personal/support/general-shared-responsibility-framework.html). World Investor Week Coordinator: Paulyn Sng.",
                es: "Regulaci√≥n de alt√≠sima civilizaci√≥n con apoyo psicol√≥gico para las v√≠ctimas (https://www.scamshield.gov.sg/avenues-of-support/), demostrando gran atenci√≥n al drama humano. La Polic√≠a, a trav√©s de la aplicaci√≥n Scamshield, ofrece una gu√≠a ejemplar sobre t√°cticas psicol√≥gicas (https://www.scamshield.gov.sg/why-do-people-fall-prey-to-scams/) e informes infogr√°ficos (https://www.scamshield.gov.sg/scams-and-cybercrime-briefs/). Gu√≠a de riesgos: https://www.moneysense.gov.sg/investments/investment-risk/. Cyber Security Agency (Facebook): https://www.facebook.com/CSAsingapore. DBS Bank promueve la responsabilidad compartida (https://www.dbs.com.sg/personal/support/general-shared-responsibility-framework.html). World Investor Week Coordinator: Paulyn Sng."
            }
        };

        function getTranslatedNotes(countryName, notes) {
            if (countryNotesTranslations[countryName] && countryNotesTranslations[countryName][currentLanguage]) {
                return countryNotesTranslations[countryName][currentLanguage];
            }
            return notes; // Ritorna il testo originale se non c'√® traduzione
        }

        // Protezione Copyright - XOR Cipher semplice
        const COPYRIGHT_KEY = 'MarcelloStancaFlorenceIT2026';
        function xorCipher(str, key) {
            let result = '';
            for (let i = 0; i < str.length; i++) {
                result += String.fromCharCode(str.charCodeAt(i) ^ key.charCodeAt(i % key.length));
            }
            return result;
        }
        
        // Anti-scraping: watermark invisibile nei dati
        function addWatermark(data) {
            const watermark = {
                _copyright: '¬© 2026 Avvocato Marcello Stanca - Firenze, Italy',
                _license: 'Proprietary - Unauthorized copying prohibited',
                _contact: 'lawyer@marcellostanca.it',
                _timestamp: new Date().toISOString()
            };
            // Aggiungi watermark a ogni paese
            Object.keys(data).forEach(key => {
                if (data[key].country_name) {
                    data[key]._watermark = watermark._copyright;
                }
            });
            return data;
        }

        document.addEventListener('DOMContentLoaded', async () => {
            // Protezione anti-copia: copyright notice nella console
            console.log('%c‚ö†Ô∏è DATABASE PROTETTO DA COPYRIGHT', 'color: red; font-size: 20px; font-weight: bold;');
            console.log('%c¬© 2026 Avvocato Marcello Stanca - Firenze, Italy', 'color: red; font-size: 14px;');
            console.log('%cL\'uso non autorizzato √® vietato - lawyer@marcellostanca.it', 'color: red; font-size: 12px;');
            
            await loadCountryData();
            changeLanguage(currentLanguage);
            setupSearch();
        });

        async function loadCountryData() {
            try {
                // Prova prima il database cifrato (se esiste)
                let data;
                try {
                    const encResponse = await fetch('db.enc');
                    if (encResponse.ok) {
                        const encoded = await encResponse.text();
                        const decoded = atob(encoded);
                        const decrypted = xorCipher(decoded, COPYRIGHT_KEY);
                        data = JSON.parse(decrypted);
                        console.log('%cüîí Database cifrato caricato', 'color: green; font-weight: bold;');
                    } else {
                        throw new Error('Encrypted DB not found');
                    }
                } catch (encError) {
                    // Fallback al JSON normale
                    const response = await fetch('financial_authorities_database.json');
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    data = await response.json();
                }
                
                // Aggiungi watermark copyright
                data = addWatermark(data);
                
                // Converti l'oggetto in array
                countriesData = Object.values(data);
                renderAll();
            } catch (error) {
                console.error('Error loading country data:', error);
                document.getElementById('countriesGrid').innerHTML = `<p style="color: red; text-align: center;">Could not load country data. Please check the console for errors.</p>`;
            }
        }

        function renderAll() {
            updateStats();
            renderCountries();
            renderFlagsGrid();
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            const activeBtn = Array.from(document.querySelectorAll('.lang-btn')).find(btn => btn.textContent.includes(lang.toUpperCase()));
            if(activeBtn) activeBtn.classList.add('active');

            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.innerHTML = translations[lang][key];
                }
            });
             document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
            renderAll();
        }

        function renderCountries() {
            const grid = document.getElementById('countriesGrid');
            grid.innerHTML = '';
            
            const sortedCountries = countriesData.sort((a, b) => 
                a.country_name.localeCompare(b.country_name)
            );
            
            const filtered = sortedCountries.filter(country => {
                if (currentFilter === 'all') return true;
                if (currentFilter === 'altissimo') return country.protectionLevel === 'Altissimo';
                if (currentFilter === 'ue') return country.isEU;
                if (currentFilter === 'non-ue') return !country.isEU;
                return false;
            });

            filtered.forEach(country => {
                const card = document.createElement('div');
                card.className = 'country-card';
                card.onclick = () => openModal(country.country_name);
                
                const protectionClass = `protection-${(country.protectionLevel || 'medio').toLowerCase()}`;
                
                // Estrai il codice paese per flag-icon
                const countryCode = getCountryCode(country.country_name);
                let flagHTML = '';
                if (countryCode && countryCode !== 'CEMAC' && countryCode !== 'ECSRC') {
                    flagHTML = `<span class="flag-icon-wrapper"><span class="fi fi-${countryCode.toLowerCase()}"></span></span>`;
                } else {
                    flagHTML = `<span class="flag-icon-wrapper" style="font-size: 3em;">üåç</span>`;
                }
                
                card.innerHTML = `
                    <div class="country-header">
                        <div class="country-flag">${flagHTML}</div>
                        <div class="country-name">${country.country_name}</div>
                    </div>
                    <div class="country-info">
                        <div class="info-row">
                            <span class="info-label">${translations[currentLanguage].authority || 'Authority'}:</span>
                            <span class="info-value">${country.financial_authority.name} (${country.financial_authority.abbreviation})</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">${translations[currentLanguage].protectionLevel || 'Protection'}:</span>
                            <span class="protection-badge ${protectionClass}">${country.protectionLevel}</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterCountries(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            const activeBtn = Array.from(document.querySelectorAll('.filter-btn')).find(btn => btn.getAttribute('onclick').includes(`'${filter}'`));
            if(activeBtn) activeBtn.classList.add('active');
            renderCountries();
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const cards = document.querySelectorAll('.country-card');
                cards.forEach(card => {
                    card.style.display = card.textContent.toLowerCase().includes(searchTerm) ? 'block' : 'none';
                });
            });
        }

        function updateStats() {
            const total = countriesData.length;
            const eu = countriesData.filter(c => c.isEU).length;
            const high = countriesData.filter(c => c.protectionLevel === 'Altissimo').length;
            
            document.getElementById('totalCountries').textContent = total;
            document.getElementById('euCountries').textContent = eu;
            document.getElementById('highProtection').textContent = high;
        }

        function openModal(countryName) {
            const country = countriesData.find(c => c.country_name === countryName);
            if (!country) return;
            
            const modal = document.getElementById('countryModal');
            const modalContent = document.getElementById('modalContent');
            
            const socialLinks = country.financial_authority.social_links;
            let socialHTML = '';
            if (socialLinks && Object.keys(socialLinks).length > 0) {
                socialHTML = Object.entries(socialLinks).map(([key, value]) => {
                    if (!value) return '';
                    return `<a href="${value}" target="_blank" style="margin-right: 10px; text-transform: capitalize;">${key}</a>`;
                }).join('');
            }

            modalContent.innerHTML = `
                <div class="country-header">
                    <div class="country-flag">${country.flag}</div>
                    <div class="country-name">${country.country_name}</div>
                </div>
                <div class="country-info" style="margin-top: 20px;">
                    <p><strong>${translations[currentLanguage].modalAuthority || 'Authority'}:</strong> ${country.financial_authority.name}</p>
                    <p><strong>${translations[currentLanguage].modalAbbreviation || 'Abbreviation'}:</strong> ${country.financial_authority.abbreviation}</p>
                    <p><strong>${translations[currentLanguage].protectionLevel || 'Protection'}:</strong> ${country.protectionLevel}</p>
                    <div class="authority-link" style="margin: 15px 0;">
                        <strong>${translations[currentLanguage].modalHomepage || 'Homepage'}:</strong><br>
                        <a href="${country.financial_authority.homepage}" target="_blank">${country.financial_authority.homepage}</a>
                    </div>
                    <div class="authority-link" style="margin: 15px 0;">
                        <strong>${translations[currentLanguage].modalFraudReport || 'Fraud Report'}:</strong><br>
                        <a href="${country.financial_authority.fraudReportLink}" target="_blank">${country.financial_authority.fraudReportLink}</a>
                    </div>
                    <p><strong>${translations[currentLanguage].modalEmail || 'Email'}:</strong> <a href="mailto:${country.financial_authority.authorityEmail}">${country.financial_authority.authorityEmail}</a></p>
                    ${socialHTML ? `<p style="margin-top:15px;"><strong>${translations[currentLanguage].modalSocial || 'Social'}:</strong> ${socialHTML}</p>` : ''}
                    <h3 style="margin-top: 20px;">${translations[currentLanguage].modalNotes || 'Notes'}:</h3>
                    <p>${getTranslatedNotes(country.country_name, country.notes).replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank">$1</a>')}</p>
                </div>
            `;
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('countryModal').style.display = 'none';
        }

        window.onclick = (event) => {
            if (event.target === document.getElementById('countryModal')) closeModal();
        };

        function renderFlagsGrid() {
            const grid = document.getElementById('flagsGrid');
            grid.innerHTML = '';
            
            const sortedCountries = [...countriesData].sort((a, b) => 
                a.country_name.localeCompare(b.country_name)
            );

            sortedCountries.forEach(country => {
                const flagItem = document.createElement('div');
                flagItem.className = 'flag-item';
                flagItem.onclick = () => openModal(country.country_name);
                
                // Estrai il codice paese (es: IT, FR, US)
                const countryCode = getCountryCode(country.country_name);
                
                // Usa flag-icon CSS per tutte le bandiere (48x36px)
                let flagHTML = '';
                if (countryCode && countryCode !== 'CEMAC' && countryCode !== 'ECSRC') {
                    // Bandiere nazionali con flag-icon-css
                    flagHTML = `<span class="flag-icon-wrapper"><span class="fi fi-${countryCode.toLowerCase()}"></span></span>`;
                } else {
                    // Regioni CEMAC/ECSRC: globo emoji
                    flagHTML = `<span class="flag-icon-wrapper" style="font-size: 3em;">üåç</span>`;
                }
                
                flagItem.innerHTML = `
                    ${flagHTML}
                    <span class="flag-code">${countryCode}</span>
                `;
                
                grid.appendChild(flagItem);
            });
        }

        function getCountryCode(countryName) {
            const codes = {
                'Albania': 'AL', 'Algeria': 'DZ', 'Angola': 'AO', 'Argentina': 'AR', 'Armenia': 'AM',
                'Australia': 'AU', 'Austria': 'AT', 'Azerbaijan': 'AZ', 'Bahamas': 'BS', 'Bahrain': 'BH',
                'Bangladesh': 'BD', 'Barbados': 'BB', 'Belgium': 'BE', 'Bermuda': 'BM', 'Bolivia': 'BO',
                'Botswana': 'BW', 'Brazil': 'BR', 'British Virgin Islands': 'VG', 'Bulgaria': 'BG',
                'Burkina Faso': 'BF', 'Cambodia': 'KH', 'Canada': 'CA', 'Cayman Islands': 'KY',
                'CEMAC (Regional)': 'CEMAC', 'Chile': 'CL', 'Chinese Taipei': 'TW', 'Colombia': 'CO',
                'Costa Rica': 'CR', 'C√¥te d\'Ivoire': 'CI', 'Croatia': 'HR', 'Cyprus': 'CY',
                'Czech Republic': 'CZ', 'Denmark': 'DK', 'ECSRC (Regional)': 'ECSRC', 'Egypt': 'EG',
                'El Salvador': 'SV', 'Estonia': 'EE', 'Finland': 'FI', 'France': 'FR', 'Georgia': 'GE',
                'Germany': 'DE', 'Gibraltar': 'GI', 'Greece': 'GR', 'Guernsey': 'GG', 'Hong Kong': 'HK',
                'Hungary': 'HU', 'Iceland': 'IS', 'India': 'IN', 'Indonesia': 'ID', 'Ireland': 'IE',
                'Isle of Man': 'IM', 'Israel': 'IL', 'Italy': 'IT', 'Jamaica': 'JM', 'Japan': 'JP',
                'Jersey': 'JE', 'Jordan': 'JO', 'Kazakhstan': 'KZ', 'Kenya': 'KE', 'Korea, Republic of': 'KR',
                'Kuwait': 'KW', 'Kyrgyzstan': 'KG', 'Latvia': 'LV', 'Liechtenstein': 'LI', 'Lithuania': 'LT',
                'Luxembourg': 'LU', 'Malawi': 'MW', 'Malaysia': 'MY', 'Malta': 'MT', 'Mauritius': 'MU',
                'Mexico': 'MX', 'Mongolia': 'MN', 'Montenegro': 'ME', 'Morocco': 'MA', 'Mozambique': 'MZ',
                'Netherlands': 'NL', 'New Zealand': 'NZ', 'Nigeria': 'NG', 'North Macedonia': 'MK',
                'Oman': 'OM', 'Pakistan': 'PK', 'Panama': 'PA', 'Papua New Guinea': 'PG', 'Paraguay': 'PY',
                'Peru': 'PE', 'Poland': 'PL', 'Portugal': 'PT', 'Qatar': 'QA', 'Romania': 'RO',
                'Saudi Arabia': 'SA', 'Serbia': 'RS', 'Singapore': 'SG', 'Slovakia': 'SK', 'Slovenia': 'SI',
                'South Africa': 'ZA', 'Spain': 'ES', 'St. Vincent and the Grenadines': 'VC', 'Sweden': 'SE',
                'Switzerland': 'CH', 'Thailand': 'TH', 'Trinidad and Tobago': 'TT', 'Tunisia': 'TN',
                'T√ºrkiye': 'TR', 'United Arab Emirates': 'AE', 'United Kingdom': 'GB',
                'United States of America': 'US', 'Uruguay': 'UY', 'Zambia': 'ZM'
            };
            return codes[countryName] || countryName.substring(0, 3).toUpperCase();
        }

        // Protezione anti-copia: disabilita tasto destro e selezione testo sul JSON
        document.addEventListener('contextmenu', (e) => {
            if (e.target.tagName === 'SCRIPT' || window.location.href.includes('.json')) {
                e.preventDefault();
                console.warn('‚ö†Ô∏è Contenuto protetto da copyright');
            }
        });
        
        // Protezione DevTools
        (function() {
            const threshold = 160;
            setInterval(() => {
                if (window.outerWidth - window.innerWidth > threshold || 
                    window.outerHeight - window.innerHeight > threshold) {
                    console.clear();
                    console.log('%c‚ö†Ô∏è DATABASE PROTETTO DA COPYRIGHT', 'color: red; font-size: 20px; font-weight: bold;');
                    console.log('%c¬© 2026 Avvocato Marcello Stanca - Firenze, Italy', 'color: red;');
                }
            }, 1000);
        })();
        
        // Protezione anti-copia: disabilita selezione e copia del contenuto sensibile
        document.addEventListener('contextmenu', (e) => {
            if (e.target.closest('.modal') || e.target.closest('script')) {
                e.preventDefault();
                console.warn('‚ö†Ô∏è Contenuto protetto da copyright');
            }
        });
        
        document.addEventListener('copy', (e) => {
            const selection = window.getSelection().toString();
            if (selection.length > 500) {
                e.preventDefault();
                console.warn('‚ö†Ô∏è Copia eccessiva non consentita - Contenuto protetto da copyright');
            }
        });
        
        // Registrazione Service Worker per PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrato con successo:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Registrazione Service Worker fallita:', error);
                    });
            });
        }

        // Prompt per installazione PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Mostra banner di installazione personalizzato se necessario
        });
    </script>
</body>
</html>